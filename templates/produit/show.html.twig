{% extends 'base.html.twig' %}
{% block body %}

{# Flash Message #}
{% for message in app.session.flashbag.get('success') %}
    <div class="alert alert-warning col-3" role="alert">
        {{ message }}
    </div>
{% endfor %}


<div class="container">
    <div class="card d-flex justify-content-center container m-5 p-5">
    <article>
        <div class="row">
            <h3 class="card-title">{{ produit.titre }}</h2>
        </div>
        
        <div class="content mx-auto">
            <div class="row"><div class="col">
            <img src="{{ asset('uploads/images/' ~ produit.images) }}" alt="{{ produit.titre }}" style="width: 600px; height: 400px;">
            </div></div>
            <div class="m-3">
            <div class="p-3"><span><b>Prix: </b>{{ produit.prix }} Dhs</span>
            <p><b>Description: </b>
                {{ produit.description }}
            </p></div>
            </div>
            


    {# Affichage du button 'Contactez vendeur' que pour l'acheteur #}
    {% if not is_granted('ROLE_ADMIN') %}
            <button class="btn btn-outline-info pr-3 pl-3" onclick="javascript:contactForm.style.display = 'block'">Contactez le vendeur</button>
            <div id="contactForm" class="mt-4" style="display:none;">
        {{ form_start(form) }}
            <div class="row">
                <div class="col">{{ form_row(form.nom) }}</div>
                <div class="col">{{ form_row(form.telephone) }}</div>
            </div>
            <div class="row">
                <div class="col">{{ form_row(form.email) }}</div>
            </div>
            <div class="row">
                <div class="col">{{ form_row(form.message) }}</div>
            </div>
            {{ form_rest(form)}}
            <div class="form-group">
                <button class="btn btn-info">Envoyer</button>
            </div>
        {{ form_end(form) }}
    </div>
    {% endif %}

    {# Affichage des buttons de modification et suppression que pour le vendeur #}
    {% if is_granted('ROLE_ADMIN') %}
        <div class="row">
            <div class="col text-right">
                <a href="{{ path('produit_edit', {'id': produit.id }) }}" class="btn btn-outline-warning">Modifier</a>
            </div>
            <div class="col text-left">
                <form method="POST" action="{{ path('produit_delete', {'id': produit.id }) }}">
                <input type="hidden" name="_method" value="DELETE">
                <button class="btn btn-outline-danger" onclick="return confirm('Attention cet article sera supprimÃ©!')">Supprimer</button>
                </form>
            </div>
        </div>
    {% endif %}
    
</div>
</article>
</div>
</div>
{% endblock %}